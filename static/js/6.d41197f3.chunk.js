(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[6],{101:function(t,e,a){"use strict";a.r(e);var n=a(99),o=a(16),r=a(17),c=a(19),i=a(18),s=a(44),u=a(41),l=a(0),h=a(75),p=a.n(h),b=a(94),d=a.n(b),g=a(1),m=function(){return Object(g.jsx)(p.a,{className:d.a.center,type:"Circles",color:"#3f5",height:55,width:55})},f=a(21),S=a(95),j=a.n(S),v=function(t){Object(c.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={query:""},t.notify=function(){return f.b.info("fill in the field",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},t.handleSubmit=function(e){e.preventDefault();var a=t.state.query;a.trim()?t.props.onSubmitForm(a):t.notify(),t.resetState()},t.handleChange=function(e){t.setState({query:e.currentTarget.value})},t.resetState=function(){t.setState({query:""})},t}return Object(r.a)(a,[{key:"render",value:function(){return Object(g.jsx)("header",{className:j.a.Searchbar,children:Object(g.jsxs)("form",{onSubmit:this.handleSubmit,className:j.a.SearchForm,children:[Object(g.jsx)("button",{type:"submit",className:j.a.SearchFormButton,children:Object(g.jsx)("span",{className:j.a.SearchFormButtonLabel,children:"Search"})}),Object(g.jsx)("input",{className:j.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movie",name:"search",value:this.state.query,onChange:this.handleChange})]})})}}]),a}(l.Component),O=a(37),_=function(t){Object(c.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(o.a)(this,a);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={articles:[],page:1,loading:!1,toResult:!1},t.onSearch=function(e){t.setState({articles:[],page:1}),t.getShowTitle(e)},t.getListMovie=function(){var e=t.state,a=e.page,o=e.articles,r=t.props.location.search.slice(1);console.log(r),t.toggleLoading(),Object(O.c)(r,a).then((function(e){0!==e.data.results.length?t.setState({articles:[].concat(Object(n.a)(o),Object(n.a)(e.data.results)),page:a+1}):t.setState({toResult:!0})})).catch((function(e){return t.setState({error:e})})).finally(t.toggleLoading)},t.getShowTitle=function(e){var a=t.props,n=a.history,o=a.location;n.push({pathname:o.pathname,search:"query=".concat(e)})},t.getLoadMore=function(){t.getListMovie()},t.toggleLoading=function(){t.setState((function(t){return{loading:!t.loading}}))},t}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.location.search&&this.getListMovie()}},{key:"componentDidUpdate",value:function(t,e){var a=this.props.location.search,n=t.location.search;a!==n&&(this.setState({toResult:!1}),this.getListMovie()),console.log(a,n),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var t=this.state,e=t.loading,a=t.articles,n=t.toResult;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(v,{onSubmitForm:this.onSearch}),e&&Object(g.jsx)(m,{onLoad:e}),n&&Object(g.jsx)("p",{children:"No result"}),a.length>0&&Object(g.jsx)(u.a,{list:a}),a.length>0&&Object(g.jsx)(s.a,{onClick:this.getLoadMore,"aria-label":"Load more",children:"Load more"})]})}}]),a}(l.Component);e.default=_},37:function(t,e,a){"use strict";a.d(e,"e",(function(){return c})),a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return u})),a.d(e,"d",(function(){return l}));var n=a(43),o=a.n(n),r="35e0acb18456e1bafb134cbae820a65c",c=o.a.get("https://api.themoviedb.org/3/trending/movie/week?api_key=".concat(r)),i=function(t){return o.a.get("https://api.themoviedb.org/3/movie/".concat(t,"/credits?api_key=").concat(r,"&language=en-US"))},s=function(t){return o.a.get("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(r,"&language=en-US"))},u=function(t,e){return o.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat(r,"&language=en-US&").concat(t,"&page=").concat(e,"&include_adult=false"))},l=function(t){return o.a.get("https://api.themoviedb.org/3/movie/".concat(t,"/reviews?api_key=").concat(r,"&language=en-US&page=1"))}},41:function(t,e,a){"use strict";a(0);var n=a(9),o=a(2),r=a(42),c=a.n(r),i=a(1);e.a=Object(o.g)((function(t){var e=t.list,a=t.location;return Object(i.jsx)("ol",{children:e.map((function(t){return Object(i.jsx)("li",{className:c.a.list,children:Object(i.jsx)(n.b,{to:{pathname:"movies/".concat(t.id),state:{from:a.pathname},search:a.search},children:t.title})},t.id)}))})}))},42:function(t,e,a){t.exports={list:"ListMovies_list__1r-LX"}},44:function(t,e,a){"use strict";var n=a(46),o=a(47),r=(a(0),a(45)),c=a.n(r),i=a(1),s=["children","onClick"],u=function(t){var e=t.children,a=t.onClick,r=Object(o.a)(t,s);return Object(i.jsx)("button",Object(n.a)(Object(n.a)({type:"button",className:c.a.Button,onClick:a},r),{},{children:e}))};u.defaultProps={onClick:function(){return null},children:null},e.a=u},45:function(t,e,a){t.exports={Button:"Button_Button__3mBgY"}},94:function(t,e,a){t.exports={center:"Loader_center__1mmry"}},95:function(t,e,a){t.exports={Searchbar:"Searchbar_Searchbar__3OfdA",SearchForm:"Searchbar_SearchForm__JHzyS",SearchFormButton:"Searchbar_SearchFormButton__33pBD",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__2FS8-",SearchFormInput:"Searchbar_SearchFormInput__12mSk"}}}]);
//# sourceMappingURL=6.d41197f3.chunk.js.map